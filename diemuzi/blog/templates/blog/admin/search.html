{% extends 'member/layout.html' %}

{% load compress %}

{% load form_dialog %}

{% load i18n %}

{% load static %}

{% block breadcrumbs %}
    {% include 'blog/admin/breadcrumbs.html' %}
{% endblock %}

{% block js %}
    {% compress js %}
        <script src="{% static 'form/js/modal.js' %}"></script>
    {% endcompress %}
{% endblock %}

{% block title %} : {% trans 'Blog Admin' %} : {% trans 'Search' %}{% endblock %}

{% block content %}

    <button type="button" class="btn btn-secondary mb-3 bg-white text-dark" data-toggle="modal"
            data-target="#searchModal"><i class="fas fa-search"></i> {% trans 'Search' %}
    </button>

    {% if perms.blog.add_category %}
        <a href="{% url 'blog:admin-add' %}" class="btn btn-outline-secondary mb-3 bg-white text-dark" role="button"
           aria-pressed="true"><i class="fas fa-plus-circle"></i> {% trans 'Create Blog' %}</a>
    {% endif %}

    <table class="table table-striped table-bordered table-light table-hover" id="search">
        <thead>
        <tr>
            <th scope="col">#</th>

            <th scope="col">{% trans 'Name' %}</th>

            <th scope="col">{% trans 'Category' %}</th>

            {% if perms.blog.view_category %}
                <th scope="col" class="text-center">{% trans 'Profile' %}</th>
            {% endif %}

            {% if perms.blog.delete_category %}
                <th scope="col" class="text-center">{% trans 'Delete' %}</th>
            {% endif %}
        </tr>
        </thead>

        <tbody>
        {% for item in object_list %}
            <tr>
                <th scope="row">{{ item.pk|escape }}</th>

                <td class="w-50">{{ item|escape }}</td>

                <td class="w-50">{{ item.category|escape }}</td>

                {% if perms.blog.view_blog %}
                    <td class="text-center">
                        <a href="{% url 'blog:admin-profile' item.pk %}" class="nounderline">
                            <button class="btn btn-primary btn-xs"
                                    data-title="{% trans 'Profile' %}">

                                <i class="fas fa-pencil-alt" aria-hidden="true"></i>
                            </button>
                        </a>
                    </td>
                {% endif %}

                {% if perms.blog.delete_category %}
                    <td class="text-center">
                        <button class="btn btn-danger btn-xs btn-delete"
                                data-title="{% trans 'Delete' %}"
                                data-url="{% url 'blog:admin-delete' item.pk %}"
                                id="{{ item.pk }}">

                            <i class="fas fa-trash-alt" aria-hidden="true"></i>
                        </button>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Start Pagination -->
    {% include 'form/search/pagination.html' %}
    <!-- End Pagination -->

    <!-- Start Search Modal -->
    <form action="{% url 'blog:admin-search' %}" novalidate id="search_modal">
        {% include 'form/search/modal.html' %}
    </form>
    <!-- End Search Modal -->

    {% if perms.blog.delete_blog %}
        <form action="#" method="post" id="modal_url_delete">
            {% csrf_token %}

            {% form_dialog _('Continuing will remove this blog.') 'delete' %}
        </form>
    {% endif %}

{% endblock content %}
